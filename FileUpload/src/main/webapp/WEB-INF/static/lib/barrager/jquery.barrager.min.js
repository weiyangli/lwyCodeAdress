(function(r){var a=["#ff4d4f","#ff7a45","#ffa940","#bae637","#faad14","#73d13d","#36cfc9","#40a9ff","#9254de","#f759ab"];r.fn.barrager=function(e){e=r.extend({close:!0,top:0,max:10,speed:6,color:"#fff",old_ie_color:"#000000"},e||{});var o=42,i="barrage_"+Date.now(),t="#"+i,n=this.height(),d=this.width(),s=Math.floor(n/o),c="undefined"==typeof window.barragerPos?0:window.barragerPos+1;c>=s&&(c=0),window.barragerPos=c;var f=0==e.top?c*o:e.top,g=r("<div class='barrage' id='"+i+"'></div>").appendTo(r(this));if(g.css("top",f+"px"),div_barrager_box=r("<div class='barrage_box'></div>").appendTo(g),e.close&&div_barrager_box.append(" <div class='close'></div>"),e.img){div_barrager_box.append("<a class='portrait' href='javascript:;'></a>");var b=r("<img src='' >").appendTo(t+" .barrage_box .portrait");b.attr("src",e.img)}var v=r("<div class='content'></div>").appendTo(t+" .barrage_box");v.attr({title:e.info}),v.attr({id:e.id}).empty().append(e.info),navigator.userAgent.indexOf("MSIE 6.0")>0||navigator.userAgent.indexOf("MSIE 7.0")>0||navigator.userAgent.indexOf("MSIE 8.0")>0?v.css("color",e.old_ie_color):v.css("color",e.color),g.css("margin-right",0);var p=Math.floor(Math.random()*a.length);div_barrager_box.css("background-color",a[p]+"CD"),r(t).animate({right:d},1e3*e.speed,function(){r(t).remove()}),div_barrager_box.mouseover(function(){r(t).stop(!0)}),div_barrager_box.mouseout(function(){r(t).animate({right:d},1e3*e.speed,function(){r(t).remove()})}),r(t+".barrage .barrage_box .close").click(function(){r(t).remove()})},r.fn.barrager.removeAll=function(){r(".barrage").remove()}})(jQuery);